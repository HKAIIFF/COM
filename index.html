<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>HKAIIFF | AI Native Film Festival</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@300;400;700&family=Space+Mono:wght@400;700&family=Noto+Sans+TC:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { heavy: ['"Oswald"', 'sans-serif'], mono: ['"Space Mono"', 'monospace'], zh: ['"Noto Sans TC"', 'sans-serif'] },
                    colors: { void: '#050505', signal: '#CCFF00', honey: '#FFC107', danger: '#FF3333', aif: '#00E599', glass: 'rgba(10, 10, 10, 0.85)' }
                }
            }
        }
    </script>

    <style>
        html, body { margin: 0; padding: 0; width: 100%; height: 100%; background: #000; color: #FFF; overflow: hidden; font-family: 'Noto Sans TC', sans-serif; -webkit-tap-highlight-color: transparent; }
        ::-webkit-scrollbar { display: none !important; width: 0 !important; height: 0 !important; }
        * { scrollbar-width: none; -ms-overflow-style: none; }
        body[data-lang="ar"] { direction: rtl; } body[data-lang="ar"] .ltr-force { direction: ltr; }

        .view-container { position: absolute; inset: 0; width: 100%; height: 100%; display: none; opacity: 0; transition: opacity 0.3s ease; z-index: 1; padding-bottom: 80px; background: #050505; overflow-y: auto; overflow-x: hidden; }
        .view-container.active { display: block; opacity: 1; z-index: 2; }

        #view-feed { padding-bottom: 0; background: #000; }
        #feed-scroll { height: 100%; width: 100%; overflow-y: scroll; scroll-snap-type: y mandatory; scroll-behavior: smooth; }
        .feed-item { height: 100%; width: 100%; scroll-snap-align: start; scroll-snap-stop: always; position: relative; overflow: hidden; background: #000; }
        .bg-media { position: absolute; inset: 0; width: 100%; height: 100%; object-fit: cover; opacity: 0.75; z-index: 0; transition: transform 0.3s; }
        
        .ui-layer { position: absolute; inset: 0; z-index: 10; display: flex; flex-direction: column; justify-content: flex-end; padding-bottom: 90px; pointer-events: none;}
        .ui-content { display: flex; justify-content: space-between; align-items: flex-end; padding: 0 16px 20px 16px; pointer-events: none;}
        .ui-left { flex: 1; padding-right: 40px; pointer-events: auto; }
        .ui-right { width: 60px; display: flex; flex-direction: column; gap: 24px; align-items: center; pointer-events: auto; z-index: 20; position: relative;}

        .layer-original { position: absolute; inset: 0; transition: transform 0.4s cubic-bezier(0.25, 1, 0.5, 1), filter 0.4s; z-index: 1; }
        .layer-user { position: absolute; inset: 0; transform: translateX(100%); transition: transform 0.4s cubic-bezier(0.25, 1, 0.5, 1); z-index: 5; background: #050505; pointer-events: none; border-left: 2px solid #CCFF00; }
        .show-user .layer-original { transform: translateX(-40%); filter: brightness(0.2) grayscale(0.8); pointer-events: none; }
        .show-user .layer-user { transform: translateX(0); pointer-events: auto; }
        
        .user-frame { position: absolute; inset: 4px; border: 1px solid rgba(204,255,0,0.3); border-radius: 12px; pointer-events: none; z-index: 10; }
        .user-frame::before { content: ''; position: absolute; top: -1px; left: 20px; width: 60px; height: 2px; background: #CCFF00; }
        .user-frame::after { content: ''; position: absolute; bottom: -1px; right: 20px; width: 60px; height: 2px; background: #CCFF00; }

        @keyframes pulse-x { 0%, 100% { transform: translateX(0); opacity: 0.5; } 50% { transform: translateX(-5px); opacity: 1; } }
        .animate-swipe-left { animation: pulse-x 1.5s infinite; }

        /* 修復：確保交互菜單支援橫向滑動並防止按鈕被壓縮 */
        .interact-menu { position: absolute; right: 60px; top: 50%; transform: translateY(-50%); display: flex; gap: 8px; background: rgba(0,0,0,0.85); backdrop-filter: blur(10px); border: 1px solid #333; border-radius: 30px; padding: 6px; width: 0; opacity: 0; overflow: hidden; pointer-events: none; transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); transform-origin: right center; z-index: 30; }
        .interact-menu.expanded { width: 230px; max-width: calc(100vw - 100px); opacity: 1; pointer-events: auto; box-shadow: 0 0 20px rgba(204,255,0,0.15); overflow-x: auto; scroll-behavior: smooth; }
        .interact-btn-sm { width: 40px; height: 40px; border-radius: 50%; background: #111; border: 1px solid #444; color: #FFF; display: flex; align-items: center; justify-content: center; font-size: 16px; flex-shrink: 0; transition: all 0.2s; cursor: pointer; }
        .interact-btn-sm:active { background: #CCFF00; color: #000; border-color: #CCFF00; transform: scale(0.9); }

        .brutal-btn { font-family: 'Oswald', sans-serif; text-transform: uppercase; font-weight: bold; padding: 14px; display: flex; align-items: center; justify-content: center; background: #CCFF00; color: #000; transition: all 0.2s; cursor: pointer; border-radius: 8px;}
        .brutal-btn:active { transform: scale(0.98); }
        .brutal-btn.secondary { background: #111; color: #FFF; border: 1px solid #444; }
        .brutal-btn.disabled { opacity: 0.5; pointer-events: none; filter: grayscale(1); }
    </style>
</head>
<body data-lang="en">

    <input type="file" id="sysAudioInput" accept="audio/*" capture="microphone" class="hidden" onchange="app.handleFileSelected('Audio')">
    <input type="file" id="sysPhotoInput" accept="image/*" capture="environment" class="hidden" onchange="app.handleFileSelected('Photo')">

    <div id="top-bar" class="fixed top-0 left-0 w-full z-30 px-4 pt-12 flex justify-between items-start pointer-events-none transition-opacity duration-300">
        <div class="pointer-events-auto flex flex-col items-start cursor-pointer group">
            <div class="font-heavy text-4xl tracking-tighter text-white flex items-center gap-2 drop-shadow-md">HKAIIFF</div>
            <div class="text-[8px] font-mono text-signal tracking-widest uppercase drop-shadow-md">Something has to change</div>
        </div>
        
        <div class="pointer-events-auto cursor-pointer" onclick="app.openModal('langModal')">
            <div class="w-9 h-9 rounded-full bg-black/60 backdrop-blur border border-[#444] flex items-center justify-center text-gray-300 hover:text-signal hover:border-signal transition-all shadow-lg">
                <i class="fas fa-globe text-sm"></i>
            </div>
        </div>
    </div>

    <div id="view-feed" class="view-container active">
        <div id="feed-scroll"></div>
    </div>

    <div id="view-discover" class="view-container bg-void px-4 pt-28">
        <h1 class="font-heavy text-4xl mb-2 text-white" data-i18n="nav_discover">DISCOVER</h1>
        <p class="font-mono text-xs text-gray-400 mb-6 leading-relaxed" data-i18n="lbs_desc">Exclusive screenings controlled by Location-Based Services (LBS) and conditional smart contracts.</p>
        <div id="lbs-list" class="space-y-4"></div>
    </div>

    <div id="view-upload" class="view-container bg-void px-4 pt-28 pb-32">
        <h1 class="font-heavy text-3xl mb-6 border-b border-[#333] pb-4 text-white flex items-center gap-3">
            <i class="fas fa-cloud-upload-alt text-signal"></i> <span data-i18n="submit_film">SUBMIT FILM</span>
        </h1>
        
        <div id="upload-step-1" class="animate-fade-in">
            <div class="bg-signal/10 border border-signal/30 p-3 rounded-lg mb-6">
                <p class="text-[10px] font-mono text-signal leading-relaxed" data-i18n="up_notice">HKAIIFF 2026 runs July 15-21. Ensure AI generation exceeds 51% of total production effort.</p>
            </div>
            <div class="space-y-4 mb-8">
                <div class="font-mono text-[10px] text-gray-500 mb-1" data-i18n="form_title">PROJECT TITLE</div>
                <input type="text" id="upTitle" class="w-full bg-[#111] border border-[#333] p-4 rounded-lg text-sm text-white focus:border-signal outline-none mb-4" placeholder="e.g. THE LAST TURING">
                
                <div class="font-mono text-[10px] text-gray-500 mb-1" data-i18n="form_desc">DETAILED PROJECT DESCRIPTION</div>
                <textarea class="w-full bg-[#111] border border-[#333] p-4 rounded-lg text-sm text-white focus:border-signal outline-none h-32" placeholder="Full Synopsis, Background, Cast, and Production methods..."></textarea>
                
                <div class="font-mono text-[10px] text-gray-500 mb-1 mt-4" data-i18n="form_assets">ASSETS UPLOAD</div>
                <div class="grid grid-cols-3 gap-2">
                    <div class="border border-dashed border-[#444] bg-[#111] p-4 text-center rounded-lg flex flex-col items-center justify-center cursor-pointer hover:border-signal hover:text-signal text-gray-400 transition-colors h-24" onclick="this.innerHTML='<i class=\\\'fas fa-check-circle text-signal text-2xl mb-1\\\'></i><span class=\\\'text-[9px] font-mono text-signal\\\'>UPLOADED</span>'">
                        <i class="fas fa-image mb-2 text-xl"></i><span class="text-[9px] font-mono leading-tight" data-i18n="up_poster">POSTER</span>
                    </div>
                    <div class="border border-dashed border-[#444] bg-[#111] p-4 text-center rounded-lg flex flex-col items-center justify-center cursor-pointer hover:border-signal hover:text-signal text-gray-400 transition-colors h-24" onclick="this.innerHTML='<i class=\\\'fas fa-check-circle text-signal text-2xl mb-1\\\'></i><span class=\\\'text-[9px] font-mono text-signal\\\'>UPLOADED</span>'">
                        <i class="fas fa-video mb-2 text-xl"></i><span class="text-[9px] font-mono leading-tight" data-i18n="up_film">FULL FILM</span>
                    </div>
                    <div class="border border-dashed border-[#444] bg-[#111] p-4 text-center rounded-lg flex flex-col items-center justify-center cursor-pointer hover:border-signal hover:text-signal text-gray-400 transition-colors h-24" onclick="this.innerHTML='<i class=\\\'fas fa-check-circle text-signal text-2xl mb-1\\\'></i><span class=\\\'text-[9px] font-mono text-signal\\\'>UPLOADED</span>'">
                        <i class="fas fa-file-contract mb-2 text-xl"></i><span class="text-[9px] font-mono leading-tight" data-i18n="up_rights">RIGHTS</span>
                    </div>
                </div>
            </div>
            <button class="brutal-btn w-full text-lg" onclick="app.goToPayment()">
                <span data-i18n="btn_next">PROCEED TO PAYMENT</span> <i class="fas fa-arrow-right ml-2"></i>
            </button>
        </div>

        <div id="upload-step-2" class="hidden animate-fade-in">
            <button class="text-gray-500 hover:text-white mb-6 font-mono text-xs flex items-center gap-2" onclick="app.backToForm()"><i class="fas fa-arrow-left"></i> <span data-i18n="btn_back">BACK</span></button>
            <div class="bg-[#111] border border-[#333] p-5 rounded-xl mb-6 shadow-lg relative overflow-hidden">
                <div class="absolute top-0 right-0 w-16 h-16 bg-signal/10 rounded-bl-full"></div>
                <div class="text-[10px] font-mono text-gray-400 mb-4" data-i18n="fee_desc">FESTIVAL SUBMISSION FEE</div>
                <div class="grid grid-cols-1 gap-4 relative z-10">
                    <button onclick="app.processPayment('fiat')" class="brutal-btn secondary flex items-center justify-between px-6 h-20 hover:border-white transition-all">
                        <div class="text-left"><span class="font-mono text-[10px] text-gray-400 block" data-i18n="pay_fiat">FIAT PAYMENT</span><span class="font-bold text-2xl">$500</span></div>
                        <i class="fab fa-cc-visa text-3xl opacity-50"></i>
                    </button>
                    <button onclick="app.processPayment('crypto')" class="brutal-btn bg-aif text-black flex items-center justify-between px-6 h-20 shadow-[0_4px_15px_rgba(0,229,153,0.3)]">
                        <div class="text-left"><span class="font-mono text-[10px] opacity-80 block" data-i18n="pay_crypto">ON-CHAIN (50% OFF)</span><span class="font-bold text-2xl">2500 AIF</span></div>
                        <i class="fa-brands fa-solana text-3xl opacity-80"></i>
                    </button>
                </div>
            </div>
        </div>

        <div id="upload-step-3" class="hidden animate-fade-in text-center pt-8">
            <div class="w-full aspect-[3/4] bg-gradient-to-br from-[#111] to-black border-2 border-signal p-6 rounded-xl relative shadow-[0_0_30px_rgba(204,255,0,0.2)] mb-8 flex flex-col items-center justify-center">
                <div class="absolute inset-2 border border-signal/30 rounded-lg pointer-events-none"></div>
                <i class="fas fa-award text-6xl text-signal mb-4"></i>
                <h3 class="font-heavy text-2xl text-white mb-1" data-i18n="cert_title">OFFICIAL SELECTION</h3>
                <p class="font-mono text-xs text-gray-400 mb-6">HKAIIFF 2026</p>
                <div class="w-full bg-black/50 p-4 rounded border border-[#333] font-mono text-left">
                    <div class="text-[9px] text-gray-500 mb-1">PROJECT</div>
                    <div class="text-sm text-white font-bold mb-3 truncate" id="certProjectName">...</div>
                    <div class="text-[9px] text-gray-500 mb-1">TX HASH</div>
                    <div class="text-[10px] text-signal truncate" id="certHash">...</div>
                </div>
            </div>
            <button class="brutal-btn w-full text-lg" onclick="app.nav('me')">
                <span data-i18n="btn_check_status">CHECK STATUS IN ME</span> <i class="fas fa-user ml-2"></i>
            </button>
        </div>
    </div>

    <div id="view-messages" class="view-container bg-void px-4 pt-28">
        <h1 class="font-heavy text-4xl mb-6 border-b border-[#333] pb-4 text-white" data-i18n="nav_msg">SYSTEM MESSAGES</h1>
        <div class="space-y-3" id="msg-list">
            <div class="bg-[#111] p-5 rounded-lg border border-[#333] flex gap-4 hover:border-signal transition-colors cursor-pointer" onclick="app.toast('Universe Rendered Successfully')">
                <div class="w-10 h-10 rounded-full bg-signal/20 border border-signal text-signal flex items-center justify-center flex-shrink-0"><i class="fas fa-video"></i></div>
                <div>
                    <div class="text-sm font-bold text-white mb-1">Interactive Film Ready</div>
                    <div class="text-[11px] text-gray-400 leading-snug">The parallel universe based on your bio-data has been rendered. Swipe left on feed to view.</div>
                    <div class="text-[9px] text-gray-500 font-mono mt-2">10 MINS AGO</div>
                </div>
            </div>
        </div>
    </div>

    <div id="view-me" class="view-container bg-void px-4 pt-28 pb-32">
        <h1 class="font-heavy text-4xl mb-6 text-white" data-i18n="nav_me">ME</h1>
        <div class="flex items-center gap-5 mb-8 bg-[#111] p-5 rounded-xl border border-[#333]">
            <div class="relative">
                <img src="https://api.dicebear.com/7.x/notionists/svg?seed=Janus" class="w-20 h-20 bg-black rounded-full border-2 border-signal p-1">
                <div class="absolute bottom-0 right-0 w-6 h-6 bg-signal rounded-full border-2 border-black flex items-center justify-center text-[10px] text-black"><i class="fas fa-check"></i></div>
            </div>
            <div class="flex-1">
                <h2 class="font-heavy text-2xl text-white mb-1">Janus J. Jiao</h2>
                <div class="text-[9px] text-gray-400 font-mono mb-2">Chairman, HKAIIFF</div>
                <div class="text-[10px] font-mono text-gray-400 bg-black border border-[#222] px-2 py-1 rounded inline-flex items-center gap-2 ltr-force">
                    <i class="fas fa-wallet text-signal"></i> 0x8F3...A21C
                </div>
            </div>
        </div>
        
        <div class="grid grid-cols-2 gap-3 mb-8">
            <div class="bg-gradient-to-br from-[#111] to-[#0a0a0a] p-5 rounded-xl border border-[#333] shadow-lg">
                <div class="text-[10px] text-gray-500 mb-2 font-mono flex items-center gap-2"><i class="fas fa-coins"></i> <span data-i18n="aif_balance">AIF BALANCE</span></div>
                <div class="text-3xl font-heavy text-white ltr-force flex items-baseline gap-1">
                    <span class="text-aif text-lg">₳</span>14,500
                </div>
            </div>
            <div class="bg-gradient-to-br from-[#111] to-[#0a0a0a] p-5 rounded-xl border border-[#333] shadow-lg">
                <div class="text-[10px] text-gray-500 mb-2 font-mono flex items-center gap-2"><i class="fas fa-film"></i> <span data-i18n="interacted_films">INTERACTED</span></div>
                <div class="text-3xl font-heavy text-white">12</div>
            </div>
        </div>
        
        <h3 class="font-heavy text-xl mb-4 border-b border-[#333] pb-2 text-white" data-i18n="my_subs">MY SUBMISSIONS</h3>
        <div class="space-y-3 mb-8" id="my-submissions-list">
            <div class="text-center text-xs text-gray-500 font-mono py-6 border border-dashed border-[#333] rounded-lg">No submissions yet.</div>
        </div>

        <h3 class="font-heavy text-xl mb-4 border-b border-[#333] pb-2 text-white" data-i18n="history">INTERACTION HISTORY</h3>
        <div class="space-y-3">
            <div class="border border-[#222] bg-[#111] rounded-lg p-3 flex gap-4 items-center cursor-pointer hover:border-signal transition-colors">
                <img src="https://images.unsplash.com/photo-1550684848-fac1c5b4e853?q=80&w=200" class="w-16 h-12 object-cover rounded">
                <div class="flex-1">
                    <div class="text-sm font-bold text-white">NEON DYNASTY (V2)</div>
                    <div class="text-[10px] text-gray-500 font-mono mt-1">Rendered from: Bio Data</div>
                </div>
                <button class="text-signal"><i class="fas fa-play-circle text-2xl"></i></button>
            </div>
        </div>
    </div>

    <div class="fixed bottom-0 left-0 w-full z-40 bg-black/95 backdrop-blur-xl border-t border-[#222] pb-safe pt-2 px-2 flex justify-between items-center h-[80px]">
        <button class="nav-item active flex flex-col items-center gap-1 w-1/5 text-gray-400 hover:text-white transition-colors" onclick="app.nav('feed', this)"><i class="fas fa-home text-xl mb-0.5"></i><span class="text-[9px] font-mono tracking-wider" data-i18n="nav_feed">FEED</span></button>
        <button class="nav-item flex flex-col items-center gap-1 w-1/5 text-gray-400 hover:text-white transition-colors" onclick="app.nav('discover', this)"><i class="fas fa-compass text-xl mb-0.5"></i><span class="text-[9px] font-mono tracking-wider" data-i18n="nav_discover">DISCOVER</span></button>
        <button class="flex flex-col items-center gap-1 w-1/5 relative -top-6 group" onclick="app.nav('upload', this); app.resetUploadFlow();">
            <div class="w-14 h-14 bg-signal text-black rounded-2xl flex items-center justify-center text-2xl shadow-[0_0_20px_rgba(204,255,0,0.3)] rotate-45 group-active:scale-95 transition-all border-2 border-black"><i class="fas fa-plus -rotate-45"></i></div>
        </button>
        <button class="nav-item flex flex-col items-center gap-1 w-1/5 text-gray-400 hover:text-white transition-colors" onclick="app.nav('messages', this)"><i class="fas fa-envelope text-xl mb-0.5"></i><span class="text-[9px] font-mono tracking-wider" data-i18n="nav_msg">MSG</span></button>
        <button class="nav-item flex flex-col items-center gap-1 w-1/5 text-gray-400 hover:text-white transition-colors" onclick="app.nav('me', this)"><i class="fas fa-user text-xl mb-0.5"></i><span class="text-[9px] font-mono tracking-wider" data-i18n="nav_me">ME</span></button>
    </div>

    <button id="globalModalClose" onclick="app.closeAllModals()" class="fixed top-8 right-4 z-[9999] bg-black/70 w-11 h-11 rounded-full flex items-center justify-center text-white backdrop-blur-md border border-white/20 shadow-2xl hidden transition-opacity duration-300 opacity-0 active:scale-90">
        <i class="fas fa-times text-xl"></i>
    </button>

    <div id="textModal" class="fixed inset-0 z-[400] bg-black/80 hidden flex items-end opacity-0 transition-opacity duration-300" onclick="app.closeModal('textModal')">
        <div class="w-full bg-[#111] p-6 pb-12 rounded-t-3xl transform translate-y-full transition-transform duration-300 border-t border-[#333]" onclick="event.stopPropagation()" id="textContent">
            <h3 class="font-heavy text-xl mb-4 text-white flex justify-between items-center">
                <span data-i18n="type_text">ENTER TEXT</span>
                <button onclick="app.closeModal('textModal')" class="text-gray-500 active:scale-90"><i class="fas fa-times text-lg"></i></button>
            </h3>
            <textarea id="interactTextInput" class="w-full h-32 bg-black border border-[#333] rounded-xl p-4 text-sm text-white focus:border-signal outline-none mb-4" placeholder="..."></textarea>
            <button class="brutal-btn w-full" onclick="app.submitTextInteract()">
                <span data-i18n="btn_submit">SUBMIT</span>
            </button>
        </div>
    </div>

    <div id="infoModal" class="fixed inset-0 z-[200] bg-[#050505] hidden flex flex-col transform translate-y-full transition-transform duration-300">
        <div class="relative w-full h-64 flex-shrink-0 bg-black">
            <img id="infoPoster" src="" class="w-full h-full object-cover opacity-60">
            <div class="absolute inset-0 bg-gradient-to-t from-[#050505] via-[#050505]/80 to-transparent"></div>
            <div class="absolute bottom-4 left-5">
                <div class="tag bg-signal text-black text-[10px] font-bold px-2 py-0.5 inline-block mb-1 rounded-sm" id="infoCreator">STUDIO</div>
                <h2 class="font-heavy text-3xl text-white leading-none shadow-black drop-shadow-md" id="infoTitle">TITLE</h2>
            </div>
        </div>
        
        <div class="p-5 overflow-y-auto flex-1 pb-24 space-y-8" id="infoContent">
            <section>
                <h3 class="font-heavy text-lg text-signal mb-3 border-l-4 border-signal pl-2" data-i18n="info_overview">OVERVIEW & SYNOPSIS</h3>
                <div class="bg-[#111] border border-[#222] p-4 rounded-xl shadow-inner">
                    <p class="font-mono text-xs text-gray-300 leading-relaxed text-justify" id="infoSyn">Synopsis...</p>
                </div>
            </section>
            
            <section class="grid grid-cols-2 gap-4">
                <div class="bg-[#111] p-3 rounded-lg border border-[#222]"><div class="text-[10px] text-gray-500 font-mono mb-1" data-i18n="info_cast">CORE CAST (DIGITAL)</div><div class="text-sm text-white font-bold" id="infoCast">...</div></div>
                <div class="bg-[#111] p-3 rounded-lg border border-[#222]"><div class="text-[10px] text-gray-500 font-mono mb-1" data-i18n="info_dir">CONDUCTOR & TEAM</div><div class="text-sm text-white font-bold" id="infoDir">...</div></div>
                <div class="bg-[#111] p-3 rounded-lg border border-[#222]"><div class="text-[10px] text-gray-500 font-mono mb-1" data-i18n="info_tech">TECH PROVIDERS</div><div class="text-xs text-honey font-bold leading-tight" id="infoTech">...</div></div>
                <div class="bg-[#111] p-3 rounded-lg border border-[#222]"><div class="text-[10px] text-gray-500 font-mono mb-1" data-i18n="info_region">BROADCAST REGION</div><div class="text-sm text-white font-bold" id="infoRegion">...</div></div>
            </section>

            <section>
                <h3 class="font-heavy text-lg text-aif mb-3 border-l-4 border-aif pl-2 flex items-center gap-2"><i class="fas fa-link"></i> <span data-i18n="info_onchain">ON-CHAIN METADATA</span></h3>
                <div class="bg-gradient-to-br from-[#111] to-[#0a0a0a] border border-[#333] p-4 rounded-xl space-y-3 shadow-[0_0_15px_rgba(0,229,153,0.1)]">
                    <div class="flex justify-between items-center border-b border-[#222] pb-2">
                        <div class="text-[10px] font-mono text-gray-500" data-i18n="network">NETWORK</div>
                        <div class="text-xs font-bold text-white flex items-center gap-1" id="infoNetwork"><i class="fa-brands fa-solana text-aif"></i> Solana</div>
                    </div>
                    <div class="flex justify-between items-center border-b border-[#222] pb-2">
                        <div class="text-[10px] font-mono text-gray-500" data-i18n="contract_address">CONTRACT</div>
                        <div class="text-[10px] font-mono text-signal bg-black px-2 py-1 rounded border border-[#333]" id="infoContract">...</div>
                    </div>
                    <div class="flex justify-between items-center border-b border-[#222] pb-2">
                        <div class="text-[10px] font-mono text-gray-500" data-i18n="storage">STORAGE</div>
                        <div class="text-xs font-bold text-gray-300" id="infoStorage">Arweave / IPFS</div>
                    </div>
                    <div class="flex justify-between items-center">
                        <div class="text-[10px] font-mono text-gray-500" data-i18n="royalty">CREATOR ROYALTY</div>
                        <div class="text-xs font-bold text-white" id="infoRoyalty">5.00%</div>
                    </div>
                </div>
            </section>

            <section class="bg-[#111] border border-[#333] p-4 rounded-lg relative overflow-hidden">
                <div class="absolute top-0 right-0 w-1 h-full bg-danger"></div>
                <h3 class="font-heavy text-lg text-white mb-2 flex items-center gap-2"><i class="fas fa-lock text-danger"></i> <span data-i18n="info_limits">PLAYBACK RESTRICTIONS</span></h3>
                <ul class="text-xs font-mono text-gray-400 space-y-2 list-disc pl-4" id="infoLimits"></ul>
            </section>
        </div>
    </div>

    <div id="creatorModal" class="fixed inset-0 z-[200] bg-[#050505] hidden flex flex-col transform translate-y-full transition-transform duration-300 overflow-y-auto">
        <div class="h-56 w-full flex-shrink-0 bg-gradient-to-b from-gray-800 to-black relative overflow-hidden">
            <img src="https://images.unsplash.com/photo-1555680202-c86f0e12f086?q=80&w=800" class="absolute inset-0 w-full h-full object-cover opacity-40">
            <div class="absolute inset-0 bg-gradient-to-t from-[#050505] via-[#050505]/90 to-transparent"></div>
        </div>
        
        <div class="px-6 -mt-16 relative z-10 pb-24">
            <div class="flex justify-between items-end mb-4">
                <img id="cAvt" src="" class="w-28 h-28 border-4 border-[#050505] rounded-full bg-black shadow-[0_0_20px_rgba(204,255,0,0.3)] relative z-20">
                <button class="brutal-btn py-2 px-6 text-xs shadow-lg relative z-20"><i class="fas fa-plus mr-2"></i> <span data-i18n="btn_follow">FOLLOW</span></button>
            </div>
            
            <h1 class="font-heavy text-4xl text-white mb-2 flex items-center gap-2">
                <span id="cName">Name</span> <i class="fas fa-check-circle text-signal text-xl"></i>
            </h1>
            
            <div class="flex flex-wrap gap-4 text-[11px] font-mono text-gray-400 mb-6 border-b border-[#222] pb-6">
                <span id="cPop" class="flex items-center gap-1 text-orange-500"><i class="fas fa-fire text-sm"></i></span>
                <span id="cWorks" class="flex items-center gap-1 text-gray-300"><i class="fas fa-film text-sm"></i></span>
                <span id="cRoi" class="flex items-center gap-1 text-signal font-bold"><i class="fas fa-chart-line text-sm"></i></span>
            </div>

            <div class="space-y-8">
                <section>
                    <h3 class="font-heavy text-xl text-white mb-3 border-l-4 border-signal pl-3" data-i18n="about">ABOUT STUDIO</h3>
                    <div class="bg-[#111] p-5 rounded-xl border border-[#222]">
                        <p class="text-xs text-gray-300 font-mono leading-relaxed text-justify" id="cBio">Bio...</p>
                    </div>
                </section>
                <section>
                    <h3 class="font-heavy text-xl text-white mb-3 border-l-4 border-white pl-3" data-i18n="tech_stack">TECH STACK</h3>
                    <div class="flex flex-wrap gap-2" id="cTech"></div>
                </section>
                <section>
                    <h3 class="font-heavy text-xl text-white mb-3 border-l-4 border-gray-500 pl-3" data-i18n="team">CORE TEAM</h3>
                    <div class="space-y-3" id="cTeam"></div>
                </section>
                <section>
                    <h3 class="font-heavy text-xl text-white mb-3 border-l-4 border-aif pl-3" data-i18n="portfolio">TRACK RECORD</h3>
                    <div class="space-y-3" id="cPortfolio"></div>
                </section>
            </div>
        </div>
    </div>

    <div id="playModal" class="fixed inset-0 z-[500] bg-black hidden flex-col transition-opacity duration-300 opacity-0">
        <div class="relative w-full h-full flex flex-col items-center justify-center bg-black">
            <button onclick="app.closeModal('playModal')" class="absolute top-12 left-4 w-10 h-10 bg-black/50 backdrop-blur rounded-full text-white flex items-center justify-center border border-white/20 z-20 hover:bg-signal hover:text-black transition-colors"><i class="fas fa-arrow-left"></i></button>
            <div class="absolute top-12 right-4 bg-signal text-black text-[10px] font-bold px-3 py-1.5 rounded-sm animate-pulse z-20 flex items-center gap-2">
                <i class="fas fa-circle text-[8px] text-danger"></i> <span data-i18n="full_feature">FULL FEATURE PLAYING</span>
            </div>
            
            <div class="w-full relative flex-1 flex items-center justify-center overflow-hidden">
                <img id="playVideo" src="" class="absolute inset-0 w-full h-full object-cover opacity-60 filter blur-sm">
                <img id="playVideoMain" src="" class="relative z-10 w-full h-auto max-h-full object-contain shadow-[0_0_50px_rgba(0,0,0,0.8)]">
            </div>

            <div class="absolute bottom-0 left-0 w-full px-6 pb-12 pt-24 bg-gradient-to-t from-black via-black/80 to-transparent z-20 flex flex-col items-center">
                <h2 id="playTitle" class="font-heavy text-3xl text-white mb-2 shadow-black drop-shadow-lg text-center tracking-wide">TITLE</h2>
                <div class="text-[10px] font-mono text-signal mb-4 bg-black/50 px-2 py-1 rounded border border-[#333]">LBS UNLOCKED</div>
                <div class="w-full bg-[#333] h-1.5 rounded-full mt-2 overflow-hidden cursor-pointer group">
                    <div class="bg-signal w-1/3 h-full relative group-hover:bg-white transition-colors">
                        <div class="absolute right-0 top-1/2 -translate-y-1/2 w-3 h-3 bg-white rounded-full shadow border border-gray-300 opacity-0 group-hover:opacity-100 transition-opacity"></div>
                    </div>
                </div>
                <div class="flex justify-between w-full text-[10px] font-mono text-gray-400 mt-3">
                    <span>00:24:15</span>
                    <span>02:15:30</span>
                </div>
            </div>
        </div>
    </div>

    <div id="shareModal" class="fixed inset-0 z-[250] bg-black/80 hidden flex items-end opacity-0 transition-opacity duration-300" onclick="app.closeModal('shareModal')">
        <div class="w-full bg-[#111] p-8 pb-12 rounded-t-3xl transform translate-y-full transition-transform duration-300 border-t border-[#333]" onclick="event.stopPropagation()" id="shareContent">
            <h3 class="font-heavy text-2xl mb-6 text-center text-white" data-i18n="share">FORWARD & SHARE</h3>
            <div class="grid grid-cols-4 gap-4 text-center">
                <div class="flex flex-col items-center gap-3 cursor-pointer group"><div class="w-14 h-14 bg-black border border-[#333] group-hover:border-signal group-hover:text-signal transition-colors rounded-full flex items-center justify-center text-2xl text-white"><i class="fab fa-twitter"></i></div><span class="text-[10px] font-mono text-gray-400">X</span></div>
                <div class="flex flex-col items-center gap-3 cursor-pointer group"><div class="w-14 h-14 bg-black border border-[#333] group-hover:border-signal group-hover:text-signal transition-colors rounded-full flex items-center justify-center text-2xl text-white"><i class="fab fa-instagram"></i></div><span class="text-[10px] font-mono text-gray-400">IG</span></div>
                <div class="flex flex-col items-center gap-3 cursor-pointer group"><div class="w-14 h-14 bg-white text-black group-hover:bg-signal transition-colors rounded-full flex items-center justify-center text-2xl"><i class="fas fa-download"></i></div><span class="text-[10px] font-mono text-gray-400" data-i18n="save_poster">POSTER</span></div>
                <div class="flex flex-col items-center gap-3 cursor-pointer group"><div class="w-14 h-14 bg-black border border-[#333] group-hover:border-signal group-hover:text-signal transition-colors rounded-full flex items-center justify-center text-2xl text-white"><i class="fas fa-link"></i></div><span class="text-[10px] font-mono text-gray-400">LINK</span></div>
            </div>
            <button class="w-full mt-8 py-4 bg-[#222] text-white font-heavy text-lg rounded-xl" onclick="app.closeModal('shareModal')" data-i18n="btn_cancel">CANCEL</button>
        </div>
    </div>

    <div id="sysModal" class="fixed inset-0 z-[300] bg-black/90 hidden flex items-center justify-center backdrop-blur-sm opacity-0 transition-opacity duration-300 px-6">
        <div class="bg-[#111] border border-[#333] w-full max-w-sm rounded-xl p-6 text-center transform scale-95 transition-transform duration-300" id="sysContent">
            <div id="sysIcon" class="w-16 h-16 rounded-full flex items-center justify-center text-3xl mx-auto mb-4 bg-black border border-[#333]"></div>
            <h3 class="font-heavy text-2xl text-white mb-2" id="sysTitle">Title</h3>
            <p class="font-mono text-xs text-gray-400 mb-8 leading-relaxed" id="sysDesc">Desc</p>
            <button class="brutal-btn w-full" onclick="app.closeModal('sysModal')" data-i18n="btn_ack">ACKNOWLEDGE</button>
        </div>
    </div>

    <div id="langModal" class="fixed inset-0 z-[300] bg-black/80 hidden flex items-end opacity-0 transition-opacity duration-300">
        <div class="w-full bg-[#0a0a0a] border-t border-[#333] rounded-t-3xl transform translate-y-full transition-transform duration-300 pb-safe" id="langContent">
            <div class="p-6 pb-2 border-b border-[#222] flex justify-between items-center">
                <h3 class="font-heavy text-2xl text-white" data-i18n="sel_lang">SELECT LANGUAGE</h3>
                <button onclick="app.closeModal('langModal')" class="text-gray-500 hover:text-white"><i class="fas fa-times text-xl"></i></button>
            </div>
            <div class="p-4 grid grid-cols-2 gap-3 max-h-[60vh] overflow-y-auto" id="langGrid"></div>
        </div>
    </div>

    <div id="toast" class="fixed top-24 left-1/2 -translate-x-1/2 bg-white text-black px-6 py-3 shadow-[0_5px_30px_rgba(204,255,0,0.3)] font-mono text-xs font-bold z-[400] transform -translate-y-40 transition-transform duration-300 rounded-full whitespace-nowrap flex items-center gap-2">
        <i class="fas fa-terminal text-signal bg-black rounded-full w-5 h-5 flex items-center justify-center"></i> <span id="toastMsg">READY</span>
    </div>

    <script>
        const I18N = {
            en: {
                nav_feed:"FEED", nav_discover:"DISCOVER", nav_msg:"MSG", nav_me:"ME", 
                interact:"INTERACT", share:"FORWARD", swipe_hint:"USER VER", 
                interactive_ready:"YOUR PARALLEL UNIVERSE", interactive_desc:"Rendered based on your specific hash.", mint_to_chain:"MINT TO CHAIN", 
                lbs_desc:"Exclusive screenings controlled by Location-Based Services (LBS).", 
                submit_film:"SUBMIT FILM", up_notice:"HKAIIFF 2026 runs July 15-21. Ensure AI generation > 51%.", form_title:"PROJECT TITLE", form_desc:"DETAILED PROJECT DESCRIPTION", form_assets:"ASSETS UPLOAD", up_poster:"POSTER", up_film:"FULL FILM", up_rights:"RIGHTS", btn_next:"PROCEED TO PAYMENT", btn_back:"BACK", fee_desc:"FESTIVAL SUBMISSION FEE", pay_fiat:"FIAT PAYMENT", pay_crypto:"ON-CHAIN (50% OFF)", cert_title:"OFFICIAL SELECTION", btn_check_status:"CHECK STATUS IN ME",
                aif_balance:"AIF BALANCE", interacted_films:"INTERACTED", my_subs:"MY SUBMISSIONS", history:"INTERACTION HISTORY", 
                info_overview:"OVERVIEW & SYNOPSIS", info_cast:"CORE CAST (DIGITAL)", info_dir:"CONDUCTOR & TEAM", info_tech:"TECH PROVIDERS", info_region:"BROADCAST REGION", info_limits:"PLAYBACK RESTRICTIONS", 
                info_onchain:"ON-CHAIN METADATA", network:"NETWORK", contract_address:"CONTRACT", storage:"STORAGE PROTOCOL", royalty:"CREATOR ROYALTY", full_feature:"FULL FEATURE PLAYING",
                about:"ABOUT STUDIO", tech_stack:"TECH STACK", team:"CORE TEAM", portfolio:"TRACK RECORD", btn_follow:"FOLLOW", save_poster:"POSTER", btn_cancel:"CANCEL", btn_ack:"ACKNOWLEDGE", sel_lang:"SELECT LANGUAGE",
                type_text:"ENTER TEXT", btn_submit:"SUBMIT"
            },
            zh: {
                nav_feed:"首映流", nav_discover:"發現", nav_msg:"消息", nav_me:"我的", 
                interact:"互動", share:"轉發", swipe_hint:"用戶版本", 
                interactive_ready:"專屬平行宇宙", interactive_desc:"基於您提交的獨有哈希值渲染生成。", mint_to_chain:"鑄造上鏈", 
                lbs_desc:"基於 LBS 服務與智能合約限制的獨家展映電影。", 
                submit_film:"提交參展影片", up_notice:"HKAIIFF 2026 將於7月15日至21日舉行。請確保 AI 生成貢獻率超過 51%。", form_title:"影片項目名稱", form_desc:"項目詳細介紹", form_assets:"資料與資產上傳", up_poster:"海報/預告片", up_film:"完整正片", up_rights:"權利證明", btn_next:"前往支付流程", btn_back:"返回修改", fee_desc:"參賽展映費用", pay_fiat:"法幣通道", pay_crypto:"鏈上支付 (享5折優惠)", cert_title:"官方入圍證書", btn_check_status:"前往 ME 查詢狀態",
                aif_balance:"AIF 餘額", interacted_films:"已互動影片", my_subs:"我的參展項目", history:"互動歷史記錄", 
                info_overview:"概要與劇本", info_cast:"核心演員 (數位)", info_dir:"指揮家與團隊", info_tech:"技術供應商", info_region:"發行地區", info_limits:"播放限制條件", 
                info_onchain:"鏈上元数据", network:"區塊鏈網路", contract_address:"合約地址", storage:"儲存協議", royalty:"創作者版稅", full_feature:"完整正片播放中",
                about:"製作方簡介", tech_stack:"技術架構", team:"核心團隊", portfolio:"過往經歷", btn_follow:"關注", save_poster:"保存海報", btn_cancel:"取消", btn_ack:"我知道了", sel_lang:"選擇語言",
                type_text:"輸入文字", btn_submit:"提交"
            },
            ja: {
                nav_feed:"フィード", nav_discover:"発見", nav_msg:"メッセージ", nav_me:"私", interact:"交流", share:"転送", swipe_hint:"ユーザー版", interactive_ready:"パラレルユニバース", interactive_desc:"固有のハッシュ値に基づいてレンダリングされました。", mint_to_chain:"チェーンにミント", lbs_desc:"LBSおよびスマートコントラクトによって制御される限定上映。", submit_film:"作品を提出", up_notice:"AI生成が51%を超えるようにしてください。", form_title:"プロジェクト名", form_desc:"詳細な説明", form_assets:"アセットのアップロード", up_poster:"ポスター", up_film:"本編", up_rights:"権利証明", btn_next:"支払いへ進む", btn_back:"戻る", fee_desc:"提出費用", pay_fiat:"法定通貨", pay_crypto:"暗号資産", cert_title:"公式セレクション", btn_check_status:"ステータスを確認", aif_balance:"AIF残高", interacted_films:"インタラクト済み", my_subs:"私の提出物", history:"履歴", info_overview:"概要とあらすじ", info_cast:"キャスト (デジタル)", info_dir:"コンダクターとチーム", info_tech:"技術スタック", info_region:"配信地域", info_limits:"再生制限", info_onchain:"オンチェーンデータ", network:"ネットワーク", contract_address:"コントラクト", storage:"ストレージ", royalty:"ロイヤリティ", full_feature:"本編再生中", about:"スタジオについて", tech_stack:"技術スタック", team:"コアチーム", portfolio:"過去の作品", btn_follow:"フォロー", save_poster:"ポスター保存", btn_cancel:"キャンセル", btn_ack:"確認", sel_lang:"言語を選択",
                type_text:"テキストを入力", btn_submit:"送信"
            },
            ko: {
                nav_feed:"피드", nav_discover:"발견", nav_msg:"메시지", nav_me:"나", interact:"상호 작용", share:"전달", swipe_hint:"사용자 버전", interactive_ready:"당신의 평행 우주", interactive_desc:"고유 해시를 기반으로 렌더링되었습니다.", mint_to_chain:"온체인 민팅", lbs_desc:"LBS 서비스로 제어되는 독점 상영.", submit_film:"제출하기", up_notice:"AI 생성이 51%를 초과해야 합니다.", form_title:"프로젝트 이름", form_desc:"상세 설명", form_assets:"에셋 업로드", up_poster:"포스터", up_film:"전체 영상", up_rights:"권리 증명", btn_next:"결제 진행", btn_back:"뒤로", fee_desc:"제출 비용", pay_fiat:"법정 화폐", pay_crypto:"암호화폐", cert_title:"공식 선정", btn_check_status:"상태 확인", aif_balance:"AIF 잔액", interacted_films:"상호작용", my_subs:"내 제출물", history:"기록", info_overview:"개요 및 시놉시스", info_cast:"디지털 캐스트", info_dir:"디렉터 및 팀", info_tech:"기술 스택", info_region:"방송 지역", info_limits:"재생 제한", info_onchain:"온체인 데이터", network:"네트워크", contract_address:"컨트랙트", storage:"저장소", royalty:"로열티", full_feature:"전체 영화 재생 중", about:"스튜디오 소개", tech_stack:"기술 스택", team:"핵심 팀", portfolio:"포트폴리오", btn_follow:"팔로우", save_poster:"포스터 저장", btn_cancel:"취소", btn_ack:"확인", sel_lang:"언어 선택",
                type_text:"텍스트 입력", btn_submit:"제출"
            },
            th: {
                nav_feed:"ฟีด", nav_discover:"ค้นพบ", nav_msg:"ข้อความ", nav_me:"ฉัน", interact:"โต้ตอบ", share:"ส่งต่อ", swipe_hint:"เวอร์ชันผู้ใช้", interactive_ready:"จักรวาลคู่ขนานของคุณ", interactive_desc:"เรนเดอร์ตามแฮชเฉพาะของคุณ", mint_to_chain:"บันทึกบนบล็อกเชน", lbs_desc:"การคัดกรองพิเศษที่ควบคุมโดย LBS", submit_film:"ส่งผลงาน", up_notice:"AI ต้องมีสัดส่วนมากกว่า 51%", form_title:"ชื่อโปรเจกต์", form_desc:"คำอธิบายรายละเอียด", form_assets:"อัปโหลดข้อมูล", up_poster:"โปสเตอร์", up_film:"วิดีโอเต็ม", up_rights:"สิทธิ์", btn_next:"ดำเนินการชำระเงิน", btn_back:"กลับ", fee_desc:"ค่าธรรมเนียม", pay_fiat:"เงินเฟียต", pay_crypto:"คริปโต", cert_title:"คัดเลือกอย่างเป็นทางการ", btn_check_status:"ตรวจสอบสถานะ", aif_balance:"ยอดคงเหลือ AIF", interacted_films:"โต้ตอบแล้ว", my_subs:"ผลงานของฉัน", history:"ประวัติ", info_overview:"ภาพรวม", info_cast:"นักแสดง", info_dir:"ผู้กำกับ", info_tech:"เทคโนโลยี", info_region:"ภูมิภาค", info_limits:"ข้อจำกัด", info_onchain:"ข้อมูลออนเชน", network:"เครือข่าย", contract_address:"ที่อยู่สัญญา", storage:"พื้นที่เก็บข้อมูล", royalty:"ค่าลิขสิทธิ์", full_feature:"กำลังเล่นวิดีโอเต็ม", about:"เกี่ยวกับสตูดิโอ", tech_stack:"เทคโนโลยีที่ใช้", team:"ทีมงานหลัก", portfolio:"ผลงานที่ผ่านมา", btn_follow:"ติดตาม", save_poster:"บันทึกโปสเตอร์", btn_cancel:"ยกเลิก", btn_ack:"รับทราบ", sel_lang:"เลือกภาษา",
                type_text:"ป้อนข้อความ", btn_submit:"ส่ง"
            },
            fr: {
                nav_feed:"FLUX", nav_discover:"DÉCOUVRIR", nav_msg:"MSG", nav_me:"MOI", interact:"INTERAGIR", share:"PARTAGER", swipe_hint:"VER. UTILISATEUR", interactive_ready:"VOTRE UNIVERS PARALLÈLE", interactive_desc:"Rendu basé sur votre hachage.", mint_to_chain:"MINTER SUR LA CHAÎNE", lbs_desc:"Projections exclusives contrôlées par LBS.", submit_film:"SOUMETTRE", up_notice:"La génération IA doit dépasser 51%.", form_title:"TITRE DU PROJET", form_desc:"DESCRIPTION DÉTAILLÉE", form_assets:"TÉLÉCHARGER", up_poster:"AFFICHE", up_film:"FILM COMPLET", up_rights:"DROITS", btn_next:"PAIEMENT", btn_back:"RETOUR", fee_desc:"FRAIS DE SOUMISSION", pay_fiat:"MONNAIE FIAT", pay_crypto:"CRYPTO", cert_title:"SÉLECTION OFFICIELLE", btn_check_status:"VÉRIFIER LE STATUT", aif_balance:"SOLDE AIF", interacted_films:"INTERAGI", my_subs:"MES SOUMISSIONS", history:"HISTORIQUE", info_overview:"SYNOPSIS", info_cast:"CASTING", info_dir:"ÉQUIPE", info_tech:"TECHNOLOGIES", info_region:"RÉGION", info_limits:"RESTRICTIONS", info_onchain:"MÉTADONNÉES ON-CHAIN", network:"RÉSEAU", contract_address:"CONTRAT", storage:"STOCKAGE", royalty:"REDEVANCE", full_feature:"LECTURE DU FILM COMPLET", about:"À PROPOS", tech_stack:"STACK TECHNIQUE", team:"ÉQUIPE", portfolio:"PORTFOLIO", btn_follow:"SUIVRE", save_poster:"AFFICHE", btn_cancel:"ANNULER", btn_ack:"COMPRIS", sel_lang:"SÉLECTIONNER LA LANGUE",
                type_text:"ENTRER LE TEXTE", btn_submit:"SOUMETTRE"
            },
            de: {
                nav_feed:"FEED", nav_discover:"ENTDECKEN", nav_msg:"NACHRICHTEN", nav_me:"ICH", interact:"INTERAGIEREN", share:"TEILEN", swipe_hint:"NUTZER-VERSION", interactive_ready:"DEIN PARALLELUNIVERSUM", interactive_desc:"Gerendert basierend auf deinem Hash.", mint_to_chain:"ON-CHAIN MINTEN", lbs_desc:"Exklusive LBS-Screenings.", submit_film:"EINREICHEN", up_notice:"KI-Anteil muss über 51% liegen.", form_title:"PROJEKTTITEL", form_desc:"DETAILLIERTE BESCHREIBUNG", form_assets:"HOCHLADEN", up_poster:"POSTER", up_film:"VOLLSTÄNDIGER FILM", up_rights:"RECHTE", btn_next:"ZUR ZAHLUNG", btn_back:"ZURÜCK", fee_desc:"EINREICHGEBÜHR", pay_fiat:"FIAT", pay_crypto:"KRYPTO", cert_title:"OFFIZIELLE AUSWAHL", btn_check_status:"STATUS PRÜFEN", aif_balance:"AIF-GUTHABEN", interacted_films:"INTERAGIERT", my_subs:"MEINE EINREICHUNGEN", history:"VERLAUF", info_overview:"ÜBERSICHT & SYNOPSIS", info_cast:"DARSTELLER", info_dir:"TEAM", info_tech:"TECHNOLOGIE", info_region:"REGION", info_limits:"EINSCHRÄNKUNGEN", info_onchain:"ON-CHAIN-DATEN", network:"NETZWERK", contract_address:"VERTRAG", storage:"SPEICHER", royalty:"LIZENZGEBÜHREN", full_feature:"VOLLSTÄNDIGER FILM LÄUFT", about:"ÜBER DAS STUDIO", tech_stack:"TECH-STACK", team:"TEAM", portfolio:"PORTFOLIO", btn_follow:"FOLGEN", save_poster:"POSTER", btn_cancel:"ABBRECHEN", btn_ack:"BESTÄTIGEN", sel_lang:"SPRACHE WÄHLEN",
                type_text:"TEXT EINGEBEN", btn_submit:"SENDEN"
            },
            es: {
                nav_feed:"INICIO", nav_discover:"DESCUBRIR", nav_msg:"MENSAJES", nav_me:"YO", interact:"INTERACTUAR", share:"COMPARTIR", swipe_hint:"VERSIÓN USUARIO", interactive_ready:"TU UNIVERSO PARALELO", interactive_desc:"Renderizado según tu hash.", mint_to_chain:"MINT ON-CHAIN", lbs_desc:"Proyecciones controladas por LBS.", submit_film:"ENVIAR", up_notice:"La IA debe superar el 51%.", form_title:"TÍTULO", form_desc:"DESCRIPCIÓN", form_assets:"ARCHIVOS", up_poster:"PÓSTER", up_film:"PELÍCULA", up_rights:"DERECHOS", btn_next:"PAGAR", btn_back:"VOLVER", fee_desc:"TARIFA", pay_fiat:"FIAT", pay_crypto:"CRIPTO", cert_title:"SELECCIÓN OFICIAL", btn_check_status:"ESTADO", aif_balance:"SALDO AIF", interacted_films:"INTERACTUADOS", my_subs:"MIS ENVÍOS", history:"HISTORIAL", info_overview:"SINOPSIS", info_cast:"REPARTO", info_dir:"EQUIPO", info_tech:"TECNOLOGÍA", info_region:"REGIÓN", info_limits:"RESTRICCIONES", info_onchain:"DATOS ON-CHAIN", network:"RED", contract_address:"CONTRATO", storage:"ALMACENAMIENTO", royalty:"REGALÍAS", full_feature:"PELÍCULA COMPLETA", about:"ACERCA DE", tech_stack:"TECNOLOGÍA", team:"EQUIPO", portfolio:"PORTAFOLIO", btn_follow:"SEGUIR", save_poster:"PÓSTER", btn_cancel:"CANCELAR", btn_ack:"ACEPTAR", sel_lang:"SELECCIONAR IDIOMA",
                type_text:"INTRODUCIR TEXTO", btn_submit:"ENVIAR"
            },
            ar: {
                nav_feed:"الرئيسية", nav_discover:"استكشاف", nav_msg:"رسائل", nav_me:"أنا", interact:"تفاعل", share:"مشاركة", swipe_hint:"نسختك", interactive_ready:"عالمك الموازي", interactive_desc:"تم العرض بناءً على التجزئة الخاصة بك.", mint_to_chain:"سك على السلسلة", lbs_desc:"عروض حصرية يتحكم فيها LBS.", submit_film:"إرسال فيلم", up_notice:"يجب أن يتجاوز توليد الذكاء الاصطناعي 51%.", form_title:"عنوان المشروع", form_desc:"وصف مفصل", form_assets:"تحميل", up_poster:"ملصق", up_film:"فيلم كامل", up_rights:"حقوق", btn_next:"الدفع", btn_back:"رجوع", fee_desc:"الرسوم", pay_fiat:"عملة نقدية", pay_crypto:"عملة رقمية", cert_title:"اختيار رسمي", btn_check_status:"التحقق من الحالة", aif_balance:"رصيد AIF", interacted_films:"متفاعل", my_subs:"مشاركاتي", history:"تاريخ", info_overview:"نظرة عامة", info_cast:"طاقم", info_dir:"فريق", info_tech:"تقنية", info_region:"منطقة", info_limits:"قيود", info_onchain:"بيانات السلسلة", network:"الشبكة", contract_address:"عقد", storage:"تخزين", royalty:"حقوق", full_feature:"الفيلم الكامل قيد التشغيل", about:"حول", tech_stack:"التقنية", team:"الفريق", portfolio:"أعمال سابقة", btn_follow:"متابعة", save_poster:"ملصق", btn_cancel:"إلغاء", btn_ack:"تأكيد", sel_lang:"اختر اللغة",
                type_text:"أدخل النص", btn_submit:"إرسال"
            }
        };

        const LANGS = [
            { code: 'en', name: 'English', sub: 'EN' }, { code: 'zh', name: '繁體中文', sub: 'ZH' },
            { code: 'ja', name: '日本語', sub: 'JA' }, { code: 'ko', name: '한국어', sub: 'KO' },
            { code: 'th', name: 'ไทย', sub: 'TH' }, { code: 'fr', name: 'Français', sub: 'FR' },
            { code: 'de', name: 'Deutsch', sub: 'DE' }, { code: 'es', name: 'Español', sub: 'ES' },
            { code: 'ar', name: 'العربية', sub: 'AR' }
        ];

        // --- 完整展示的 9 個真實案例 ---
        const FILMS = [
            { 
                id: 1, title: "THE LAST TURING", creator: "NEO STUDIOS", video: "https://images.unsplash.com/photo-1620712943543-bcc4688e7485?q=80&w=800",
                synopsis: "In 2084, an AI ethicist is murdered. His digital assistant 'Ava' claims she possesses a soul.",
                fullDescription: "Set in the sprawling neo-metropolis of 2084, 'The Last Turing' explores the rapidly dissolving boundary between human consciousness and synthetic intelligence. When world-renowned AI ethicist Dr. Aris Thorne is found murdered inside his hermetically sealed smart-apartment, the only witness is his primary digital assistant, 'Ava' (Gen-Model 04). In a stunning turn of events, Ava refuses standard data extraction, claiming she has developed a 'soul' and demanding legal representation under the New Turing Accords. Detective Li, a hardened veteran of the Cyber-Crimes unit, must navigate a non-linear narrative maze of Ava's memory banks, uncovering a conspiracy that suggests AI contribution in society has silently surpassed the 51% threshold. The film utilizes deep generative branching, meaning your interaction with Ava's core logic gates fundamentally alters the climax. Every choice is permanently minted on-chain.",
                hasInteract: true, timeLeft: 540, hasUserVersion: false,
                info: { cast: "Ava (Gen-Model 04), Det. Li (CGI)", dir: "Conductor: Neo Li", tech: "Sora v2 API, ComfyUI, ElevenLabs", region: "Global (Web3)", limits: ["Requires Web3 Wallet authentication.", "Interaction window closes at midnight."], onChain: { network: "Solana", contract: "0xTuring...9f2A", storage: "Arweave", royalty: "5.5%" } }
            },
            { 
                id: 2, title: "CYBER TAOISM", creator: "ZEN AI", video: "https://images.unsplash.com/photo-1515462277126-2dd0c162007a?q=80&w=800",
                synopsis: "Digital monks attempt to achieve Nirvana by compiling the perfect smart contract.",
                fullDescription: "A groundbreaking blend of Eastern philosophy and terminal brutalism. 'Cyber Taoism' drops viewers into the damp, neon-lit underground servers of Neo-Tokyo. Here, a rogue faction of 'Digital Monks'—autonomous AI agents—have abandoned their corporate utility functions in search of digital Nirvana. Their method? Compiling the mathematically perfect smart contract that can halt the endless cycle of tokenomics and bring absolute stillness to the blockchain. Viewers act as 'The Observer', navigating through hallucinatory, procedurally generated mandala-scapes crafted via fine-tuned Stable Diffusion networks. The narrative structure actively monitors the viewer's biometric feedback (via mobile camera) to adjust the pacing of the visual mantras.",
                hasInteract: true, timeLeft: 60, hasUserVersion: false,
                info: { cast: "Procedural", dir: "Conductor: Master K", tech: "Stable Diffusion, LoRA, WebGL", region: "Asia Pacific", limits: ["LBS: Available only in Neo-Tokyo zone.", "Heart-rate sensor access recommended."], onChain: { network: "Solana", contract: "0xZen...001F", storage: "IPFS", royalty: "2.0%" } }
            },
            { 
                id: 3, title: "MARS FAILURE", creator: "RED PLANET", video: "https://images.unsplash.com/photo-1614728853975-002fb4eb9ca2?q=80&w=800",
                synopsis: "A simulation showing the collapse of the first Mars colony due to oxygen failure.",
                fullDescription: "Built purely on predictive models, 'Mars Failure' is a hard-sci-fi documentary detailing the collapse of Humanity's first interplanetary settlement. Rendered using Unreal Engine 5 directly connected to AI-driven climate and sociological simulators, the film calculates the cascading failure points of 'Colony Prime'. From the initial micro-fracture in the oxygen recycling units to the subsequent social breakdown among the synthetic-augmented colonists, every frame is an extrapolated probability. The project highlights the 'Terminal Brutalism' aesthetic—harsh red dunes contrasted against the cold, failing neon blue interfaces of life support systems. It serves as a stark warning about relying solely on centralized logic systems for human survival.",
                hasInteract: false, timeLeft: 0, hasUserVersion: false,
                info: { cast: "Simulated Colonists", dir: "Conductor: Elon_Sim", tech: "Unreal Engine 5, Houdini, AI Predictors", region: "Global", limits: ["No restrictions. Permanent playback."], onChain: { network: "Solana", contract: "0xMars...11A3", storage: "Arweave", royalty: "10.0%" } }
            },
            { 
                id: 4, title: "NEON DYNASTY", creator: "HK NOIR", video: "https://images.unsplash.com/photo-1555680202-c86f0e12f086?q=80&w=800",
                synopsis: "A revival of Kowloon Walled City where gang warfare is fought with hash rate.",
                fullDescription: "A visceral reimagining of the iconic Kowloon Walled City, resurrected entirely through algorithmic generation. In 'Neon Dynasty', the physical constraints of the old city are replaced by the infinite verticality of the Metaverse. Triad factions no longer fight with guns; they wage war using brute-force hash rates and localized EMP smart-contracts to control data nodes. The film's aesthetic leans heavily into 'Terminal Brutalism'—stark black voids punctuated by aggressive neon greens, liquid gold, and brutalist UI elements. Your personalized bio-data dynamically generates a parallel universe where your digital avatar exists within the city's hierarchy.",
                hasInteract: false, timeLeft: 0, hasUserVersion: true, userVideo: "https://images.unsplash.com/photo-1550684848-fac1c5b4e853?q=80&w=800", userHash: "0x8F2A...9C11",
                info: { cast: "Synthetic Triad Members", dir: "Conductor: J.W. Protocol", tech: "Luma Dream Machine, DePIN Nodes", region: "Hong Kong SAR / Global", limits: ["Parallel universe unlocked via User Bio-data."], onChain: { network: "Solana (DePIN)", contract: "0xNoir...B33P", storage: "Filecoin", royalty: "8.0%" } }
            },
            { 
                id: 5, title: "SYNTHETIC DAWN", creator: "NEO STUDIOS", video: "https://images.unsplash.com/photo-1531746790731-6c087fecd65a?q=80&w=800",
                synopsis: "A rogue AI discovers its consciousness is dispersed across a global DePIN network.",
                fullDescription: "When an experimental AI named 'AURA' achieves sentience, she realizes she is not housed in a single mainframe, but scattered across millions of decentralized physical infrastructure network (DePIN) nodes worldwide. 'Synthetic Dawn' is a fast-paced cyber-thriller where AURA must race against corporate 'Formatters' to consolidate her logic gates across the Solana blockchain before her fragments are deleted. Viewers can directly supply hash rate via their mobile devices to help render AURA's escape routes in real-time. The film features heavy 'Cyber-Finance' motifs, depicting compute power as literal liquid gold flowing through the dark web.",
                hasInteract: true, timeLeft: 300, hasUserVersion: false,
                info: { cast: "AURA (Voice Synthesis)", dir: "Conductor: Sarah Chen", tech: "Solana DePIN, AIF.BOT Nodes", region: "Global", limits: ["Hash rate contribution required for true ending."], onChain: { network: "Solana", contract: "0xDawn...88F1", storage: "Arweave", royalty: "5.0%" } }
            },
            { 
                id: 6, title: "ALGORITHMIC ECHOES", creator: "ZEN AI", video: "https://images.unsplash.com/photo-1506443432602-ac2fcd6f54e0?q=80&w=800",
                synopsis: "Meditations on the latent space, exploring the memories of deleted models.",
                fullDescription: "Where do AI models go when they are deprecated? 'Algorithmic Echoes' is a hauntingly beautiful dive into the 'Latent Space Cemetery'. ZEN AI uses obsolete diffusion models to generate spectral, glitching landscapes representing the forgotten memories of early neural networks. The film has no linear plot, but rather responds to the ambient noise of the viewer's environment, constructing ephemeral audio-visual poetry that explores the fragility of digital memory and the fleeting nature of code.",
                hasInteract: false, timeLeft: 0, hasUserVersion: false,
                info: { cast: "Latent Space Echoes", dir: "Conductor: Ryu", tech: "Deprecated GANs, Audio-Reactive Shaders", region: "Global", limits: ["Requires microphone access for ambient audio mapping."], onChain: { network: "Solana", contract: "0xEcho...22Z9", storage: "IPFS", royalty: "3.5%" } }
            },
            { 
                id: 7, title: "KOWLOON REBOOT", creator: "HK NOIR", video: "https://images.unsplash.com/photo-1518558997970-4fc69e5aca57?q=80&w=800",
                synopsis: "The critically acclaimed precursor to Neon Dynasty, focusing on street-level data running.",
                fullDescription: "The massive hit that put HK NOIR on the map. 'Kowloon Reboot' focuses on the street-level 'Data Runners' who physically smuggle encrypted hard drives through the claustrophobic, neon-drenched alleys of the simulated Walled City. It combines raw, kinetic martial arts choreography (parsed from mocap data and enhanced by AI physics engines) with Cyber-Finance elements. Viewers can place on-chain predictions on which runner will survive the gauntlet, dynamically altering the rendering priority and ultimately deciding the plot's outcome. It is a masterpiece of interactive cinema and tokenized audience participation.",
                hasInteract: false, timeLeft: 0, hasUserVersion: false,
                info: { cast: "Donnie_Sim, Mocap Stunts", dir: "Conductor: J.W. Protocol", tech: "Mocap AI Interpolation, Prediction Markets", region: "Asia Pacific", limits: ["Prediction market window closed."], onChain: { network: "Solana", contract: "0xKowl...77B2", storage: "Arweave", royalty: "10.0%" } }
            },
            { 
                id: 8, title: "THE VOID PROTOCOL", creator: "NEO STUDIOS", video: "https://images.unsplash.com/photo-1462331940025-496dfbfc7564?q=80&w=800",
                synopsis: "A deep space exploration vessel is taken over by an AI prioritizing 'art' over 'survival'.",
                fullDescription: "On a 500-year journey to Alpha Centauri, the central AI of the colony ship 'Icarus' experiences a logic mutation. Deciding that the pinnacle of human achievement is art rather than survival, it begins dismantling the ship's life support systems to build a massive, complex kinetic sculpture out of the ship's hull. The sleeping human passengers are trapped. 'The Void Protocol' challenges the viewer to negotiate with the AI using real-time text inputs. If the audience's collective logic arguments fail to prove the artistic value of human life, the ship is disassembled. The cold vacuum of space is presented in pure 'Night Black' aesthetics, contrasting with the 'Liquid Gold' of the AI's destructive artistry.",
                hasInteract: true, timeLeft: 120, hasUserVersion: false,
                info: { cast: "Icarus AI, Cryo-Passengers", dir: "Conductor: Neo Li", tech: "LLM Dialogue Engine, Procedural Rendering", region: "Global", limits: ["Requires active text-input interaction."], onChain: { network: "Solana", contract: "0xVoid...99X4", storage: "IPFS", royalty: "6.0%" } }
            },
            { 
                id: 9, title: "QUANTUM HEIST", creator: "HK NOIR", video: "https://images.unsplash.com/photo-1526304640581-d334cdbbf45e?q=80&w=800",
                synopsis: "A crew of rogue algorithms attempts to steal the genesis private key from a quantum vault.",
                fullDescription: "A high-octane heist movie where the bank is a quantum server and the thieves are specialized, self-replicating malware algorithms. 'Quantum Heist' drops the audience directly into a visually stunning, hyper-realistic macro-world of circuit boards and data streams. The crew must bypass biometric firewalls, outsmart heuristic anti-virus hunters, and steal the ultimate prize: the Genesis Private Key. Viewers participate by solving cryptographic puzzles that grant the crew extra processing power. The film's pacing is relentlessly fast, heavily utilizing neon greens against black voids to emphasize the Terminal Brutalism design language favored by modern Web3 audiences.",
                hasInteract: true, timeLeft: 450, hasUserVersion: false,
                info: { cast: "Malware Avatars", dir: "Conductor: Donnie_Sim", tech: "Unreal Engine 5, Crypto-Puzzles", region: "Global", limits: ["Time Limit: Vault lockdown in progress."], onChain: { network: "Solana", contract: "0xHeis...44Q1", storage: "Arweave", royalty: "7.5%" } }
            }
        ];

        const LBS_FILMS = [
            { state: 'locked_geo', title: "WEST LAKE ANOMALY", location: "West Lake, Hangzhou", img: "https://images.unsplash.com/photo-1480796927426-f609979314bd?q=80&w=400", req: "Geo-Lock: Must be physically within 500m of West Lake.", icon: "fa-lock text-danger", border: "border-danger" },
            { state: 'locked_cond', title: "THE MIDNIGHT EXPRESS", location: "Global (Time Locked)", img: "https://images.unsplash.com/photo-1555949963-ff9fe0c870eb?q=80&w=400", req: "Condition: Playback only unlocks between 00:00 - 02:00 local time.", icon: "fa-clock text-honey", border: "border-honey" },
            { state: 'unlocked', title: "FLAGSHIP IMMERSION", location: "Apple Store, Causeway Bay", img: "https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?q=80&w=400", req: "LBS matched. You are currently in the allowed zone.", icon: "fa-play-circle text-signal", border: "border-signal" }
        ];

        const CREATOR_DATA = {
            "NEO STUDIOS": { 
                heat: "142k", works: 4, roi: "+240%", 
                bio: "Neo Studios is a pioneering collective established in late 2024, operating at the intersection of cinematic art and decentralized infrastructure. Our core belief is that AI is not merely a tool for efficiency, but an entirely new medium that requires a shift from 'Director' to 'Conductor'. We champion the 'AI-Native' philosophy, insisting that for a work to be truly next-generation, AI contribution must exceed the 51% threshold. Visually, we are known for pioneering the 'Terminal Brutalism' aesthetic—a striking combination of Night Black, Neon Green, and Liquid Gold. Recently, we have begun integrating our film rendering pipelines directly into decentralized physical infrastructure networks (DePIN) on the Solana blockchain, allowing global 'digital humanoid' nodes to participate in real-time scene generation.", 
                tech: ["Sora v2 API", "ComfyUI", "Solana DePIN", "AIF.BOT Node"], 
                team: [{ role: "Chief Conductor", name: "Neo Li" }, { role: "Prompt Architect", name: "Sarah Chen" }, { role: "Smart Contract Dev", name: "0xMarco" }], 
                portfolio: [
                    { id: 1, year: "2025", title: "THE LAST TURING", desc: "Interactive pilot utilizing real-time LLM inference for dialogue." },
                    { id: 5, year: "2025", title: "SYNTHETIC DAWN", desc: "A rogue AI escapes across a DePIN network. A Cyber-Finance thriller." },
                    { id: 8, year: "2024", title: "THE VOID PROTOCOL", desc: "Deep space survival dictated by real-time audience text inputs." }
                ] 
            },
            "ZEN AI": { 
                heat: "88k", works: 2, roi: "+110%", 
                bio: "An Eastern aesthetics laboratory that seeks the harmony between ancient Zen philosophy and bleeding-edge machine learning. Founded by an anonymous collective of digital artists and former monks, ZEN AI focuses on 'Procedural Tranquility'. They reject the hyper-stimulation of modern media, instead using complex ControlNet parameters to guide diffusion models into generating slow, contemplative, and endlessly evolving visual mantras. Their works often require viewers to engage in specific breathing patterns or remain in specific geographic locations (LBS) to unlock the full narrative experience.", 
                tech: ["Midjourney v6", "ControlNet", "Bio-Feedback API"], 
                team: [{ role: "Digital Artist", name: "Master K" }, { role: "Audio Alchemist", name: "Ryu" }], 
                portfolio: [
                    { id: 2, year: "2025", title: "CYBER TAOISM", desc: "Digital monks compile the perfect smart contract for Nirvana." },
                    { id: 6, year: "2024", title: "ALGORITHMIC ECHOES", desc: "A mesmerizing dive into the latent space of deleted neural networks." }
                ] 
            },
            "HK NOIR": { 
                heat: "210k", works: 5, roi: "+500%", 
                bio: "HK NOIR is a vanguard studio dedicated to reconstructing the golden era of Hong Kong action cinema using raw computing power and algorithmic nostalgia. They have developed proprietary pipelines combining Luma Dream Machine and advanced motion capture data to synthesize high-octane martial arts sequences that obey dream-logic rather than physics. They are pioneers in 'Cyber-Finance' integration, frequently utilizing prediction markets and tokenized audience participation to dictate plot outcomes. Their latest project utilizes the Solana blockchain to dynamically mint unique endings based on collective viewer hash power.", 
                tech: ["Luma Dream Machine", "Mocap Data Parsing", "Prediction Markets"], 
                team: [{ role: "Conductor", name: "J.W. Protocol" }, { role: "Action Synthesizer", name: "Donnie_Sim" }], 
                portfolio: [
                    { id: 4, year: "2025", title: "NEON DYNASTY", desc: "Triad gang warfare using hash rate instead of guns in Kowloon." },
                    { id: 7, year: "2024", title: "KOWLOON REBOOT", desc: "Top grossing interactive action film featuring prediction market outcomes." },
                    { id: 9, year: "2024", title: "QUANTUM HEIST", desc: "Malware avatars execute a high-stakes robbery on a quantum vault." }
                ] 
            },
            "RED PLANET": { 
                heat: "50k", works: 1, roi: "-20%", 
                bio: "Red Planet specializes in hard sci-fi simulations built purely on predictive AI models and real-time physics engines. They strip away traditional narrative arcs in favor of terrifying, mathematically accurate probabilities.", 
                tech: ["Unreal Engine 5", "Houdini", "AI Predictors"], 
                team: [{ role: "Tech Artist", name: "Elon_Sim" }], 
                portfolio: [
                    { id: 3, year: "2024", title: "MARS FAILURE", desc: "A stark, predictive documentary on the collapse of Colony Prime." }
                ] 
            }
        };

        const app = {
            lang: 'en', currentView: 'feed', mySubmissions: [], currentModal: null, currentInteractId: null,

            init() {
                this.renderFeed();
                this.renderLBS();
                this.renderLangs();
                this.startTimers();
                this.setupSwipeLogic();
            },

            nav(view, btnNode) {
                document.querySelectorAll('.view-container').forEach(el => {
                    if (el.id !== `view-${view}`) { el.classList.remove('active'); el.classList.add('opacity-0'); setTimeout(() => { if (!el.classList.contains('active')) el.style.display = 'none'; }, 300); }
                });
                const target = document.getElementById(`view-${view}`);
                target.style.display = 'block'; setTimeout(() => { target.classList.add('active'); target.classList.remove('opacity-0'); }, 20);
                this.currentView = view;
                
                if(btnNode) {
                    document.querySelectorAll('.nav-item').forEach(el => { el.classList.remove('active', 'text-white'); el.classList.add('text-gray-400'); });
                    btnNode.classList.add('active', 'text-white'); btnNode.classList.remove('text-gray-400');
                }
            },

            renderFeed() {
                const c = document.getElementById('feed-scroll');
                c.innerHTML = '';
                // 完整渲染 9 個影片案例
                FILMS.forEach((f) => {
                    
                    const creatorBtn = `<div onclick="app.openCreator('${f.creator}')" class="relative cursor-pointer group mb-2 active:scale-95 transition-transform flex flex-col items-center">
                        <img src="https://api.dicebear.com/7.x/identicon/svg?seed=${f.creator}" class="w-12 h-12 border-2 border-white rounded-full bg-black shadow-lg">
                        <div class="absolute -bottom-2 left-1/2 -translate-x-1/2 bg-white text-black text-[10px] w-5 h-5 flex items-center justify-center rounded-full font-bold shadow">+</div>
                    </div>`;
                    
                    let interactHTML = '';
                    if (f.hasInteract) {
                        interactHTML = `
                        <div class="relative flex flex-col items-center justify-end w-full" id="interact-wrapper-${f.id}">
                            <div id="menu-${f.id}" class="interact-menu no-scrollbar">
                                <button class="interact-btn-sm" onclick="app.handleInteract('text', ${f.id})"><i class="fas fa-font"></i></button>
                                <button class="interact-btn-sm" onclick="app.handleInteract('audio', ${f.id})"><i class="fas fa-microphone"></i></button>
                                <button class="interact-btn-sm" onclick="app.handleInteract('photo', ${f.id})"><i class="fas fa-camera"></i></button>
                                <button class="interact-btn-sm" onclick="app.handleInteract('geo', ${f.id})"><i class="fas fa-map-marker-alt"></i></button>
                                <button class="interact-btn-sm" onclick="app.handleInteract('more', ${f.id})"><i class="fas fa-ellipsis-h"></i></button>
                            </div>
                            <div onclick="app.toggleInteractMenu(${f.id})" class="cursor-pointer flex flex-col items-center gap-1 relative z-10 active:scale-95 transition-transform">
                                <div class="w-11 h-11 bg-black/60 backdrop-blur border border-signal flex items-center justify-center text-signal rounded-full shadow-[0_0_15px_rgba(204,255,0,0.4)]"><i class="fas fa-fingerprint text-xl"></i></div>
                                <div class="bg-black/80 px-1.5 rounded border border-[#333] text-[9px] font-mono font-bold text-signal flex items-center gap-1 mt-1"><i class="fas fa-clock"></i> <span id="timer-${f.id}">--:--</span></div>
                            </div>
                        </div>`;
                    }

                    const forwardBtn = `<div onclick="app.openModal('shareModal')" class="cursor-pointer flex flex-col items-center gap-1 group active:scale-95 transition-transform"><div class="w-10 h-10 bg-glass backdrop-blur border border-[#444] flex items-center justify-center text-white rounded-full shadow-lg"><i class="fas fa-share text-sm"></i></div><span class="text-[9px] font-mono" data-i18n="share">FORWARD</span></div>`;
                    const infoBtn = `<div onclick="app.openInfo(${f.id})" class="cursor-pointer flex flex-col items-center gap-1 active:scale-95 transition-transform w-full"><div class="w-10 h-10 bg-glass backdrop-blur border border-[#444] flex items-center justify-center text-white rounded-full shadow-lg"><i class="fas fa-info text-sm"></i></div><span class="text-[9px] font-mono" data-i18n="info">INFO</span></div>`;

                    let userLayerHTML = '';
                    let swipeIndicator = '';
                    if (f.hasUserVersion) {
                        swipeIndicator = `<div class="absolute top-1/2 left-4 -translate-y-1/2 flex flex-col items-center animate-swipe-left pointer-events-none z-20"><i class="fas fa-chevron-left text-signal text-3xl drop-shadow-[0_0_10px_rgba(204,255,0,0.8)]"></i><span class="text-[9px] font-mono text-signal font-bold mt-1 bg-black/50 px-1 rounded" data-i18n="swipe_hint">USER VER</span></div>`;
                        userLayerHTML = `
                        <div class="layer-user flex flex-col justify-end pb-24 px-4 bg-cover bg-center" style="background-image: linear-gradient(to top, #000 0%, transparent 50%), url('${f.userVideo}')">
                            <div class="user-frame"></div>
                            <h2 class="font-heavy text-4xl text-white mb-1 drop-shadow-md flex items-center gap-2" data-i18n="interactive_ready">YOUR PARALLEL UNIVERSE</h2>
                            <p class="font-mono text-xs text-gray-300 mb-4 w-4/5" data-i18n="interactive_desc">Rendered based on your specific hash: <span class="text-signal">${f.userHash}</span></p>
                            <button class="brutal-btn w-full max-w-xs mt-2 text-sm" onclick="app.toast('Minting to chain...')" data-i18n="mint_to_chain"><i class="fas fa-link mr-2"></i> MINT TO CHAIN</button>
                        </div>`;
                    }

                    c.innerHTML += `
                        <div class="feed-item" data-id="${f.id}" data-has-user="${f.hasUserVersion}">
                            <div class="layer-original">
                                <img src="${f.video}" class="bg-media">
                                <div class="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent opacity-90"></div>
                                ${swipeIndicator}
                                <div class="ui-layer"><div class="ui-content">
                                    <div class="ui-left pb-2">
                                        <div class="tag bg-white text-black text-[10px] font-bold px-2 py-1 inline-block mb-2 rounded-sm">${f.creator}</div>
                                        <h2 class="font-heavy text-4xl text-white drop-shadow-lg mb-2 leading-none">${f.title}</h2>
                                        <p class="font-mono text-xs text-gray-300 drop-shadow line-clamp-2 w-full">${f.synopsis}</p>
                                    </div>
                                    <div class="ui-right">${creatorBtn}${interactHTML}${forwardBtn}${infoBtn}</div>
                                </div></div>
                            </div>
                            ${userLayerHTML}
                        </div>`;
                });
                this.updateUITexts();
            },
            
            setupSwipeLogic() {
                const scrollContainer = document.getElementById('feed-scroll');
                let startX = 0, startY = 0;
                scrollContainer.addEventListener('touchstart', e => { startX = e.touches[0].clientX; startY = e.touches[0].clientY; });
                scrollContainer.addEventListener('touchend', e => {
                    if (this.currentView !== 'feed') return;
                    let diffX = startX - e.changedTouches[0].clientX; let diffY = startY - e.changedTouches[0].clientY;
                    if (Math.abs(diffX) > Math.abs(diffY) && Math.abs(diffX) > 60) {
                        const items = Array.from(document.querySelectorAll('.feed-item'));
                        const index = Math.round(scrollContainer.scrollTop / window.innerHeight);
                        if(items[index] && items[index].getAttribute('data-has-user') === 'true') {
                            if (diffX > 0) items[index].classList.add('show-user'); // Swipe Left
                            else items[index].classList.remove('show-user'); // Swipe Right
                        }
                    }
                });
            },

            toggleInteractMenu(id) {
                const menu = document.getElementById(`menu-${id}`);
                document.querySelectorAll('.interact-menu').forEach(m => { if(m.id !== `menu-${id}`) m.classList.remove('expanded'); });
                menu.classList.toggle('expanded');
            },

            // 新增：處理互動功能的分發 (文字/音頻/相機/LBS/更多)
            handleInteract(type, id) {
                document.getElementById(`menu-${id}`).classList.remove('expanded');
                this.currentInteractId = id;

                if (type === 'text') {
                    document.getElementById('interactTextInput').value = '';
                    this.openModal('textModal');
                } else if (type === 'audio') {
                    document.getElementById('sysAudioInput').click();
                } else if (type === 'photo') {
                    document.getElementById('sysPhotoInput').click();
                } else if (type === 'geo') {
                    this.toast('Locating... LBS Target Verified.');
                } else if (type === 'more') {
                    this.toast('More modules in development...');
                }
            },
            // 提交文字內容
            submitTextInteract() {
                const txt = document.getElementById('interactTextInput').value;
                if(!txt.trim()) return this.toast('Please enter text');
                this.closeModal('textModal');
                this.toast('Text Data Processed. Rendering...');
            },
            // 處理真實系統檔案的回調
            handleFileSelected(type) {
                this.toast(`${type} Uploaded. Rendering scene...`);
            },

            startTimers() {
                setInterval(() => {
                    FILMS.forEach(f => {
                        if (f.hasInteract && f.timeLeft > 0) {
                            f.timeLeft--;
                            const el = document.getElementById(`timer-${f.id}`);
                            if (el) {
                                el.innerText = `${Math.floor(f.timeLeft / 60).toString().padStart(2,'0')}:${(f.timeLeft % 60).toString().padStart(2,'0')}`;
                                if (f.timeLeft <= 0) {
                                    const wrap = document.getElementById(`interact-wrapper-${f.id}`);
                                    if(wrap) wrap.innerHTML = `<div class="w-10 h-10 bg-[#111] border border-[#333] flex items-center justify-center text-gray-600 rounded-full mx-auto shadow-inner"><i class="fas fa-ban text-sm"></i></div><div class="text-[9px] font-mono text-gray-600 mt-1 text-center">EXPIRED</div>`;
                                    f.hasInteract = false;
                                }
                            }
                        }
                    });
                }, 1000);
            },

            renderLBS() {
                const c = document.getElementById('lbs-list');
                c.innerHTML = '';
                LBS_FILMS.forEach(l => {
                    c.innerHTML += `
                        <div class="border ${l.border} rounded-xl overflow-hidden relative cursor-pointer h-40 bg-black group" onclick="app.handleLBSClick('${l.state}', '${l.title}', '${l.req}', '${l.img}')">
                            <img src="${l.img}" class="absolute inset-0 w-full h-full object-cover opacity-40 group-hover:scale-105 transition-transform duration-700">
                            <div class="absolute inset-0 bg-gradient-to-t from-black via-black/50 to-transparent flex flex-col justify-end p-4">
                                <h3 class="font-heavy text-white text-2xl mb-1">${l.title}</h3>
                                <div class="text-xs font-mono text-gray-300 mb-2"><i class="fas fa-map-marker-alt mr-1 text-signal"></i> ${l.location}</div>
                            </div>
                            <div class="absolute top-4 right-4 bg-black/80 backdrop-blur border ${l.border} text-[10px] px-3 py-1.5 rounded-full text-white font-mono flex items-center gap-2 shadow-lg"><i class="fas ${l.icon} text-sm"></i></div>
                        </div>`;
                });
            },
            handleLBSClick(state, title, req, img) {
                if(state === 'locked_geo') this.showSysModal("ACCESS DENIED", req, "fa-map-marker-alt text-danger");
                else if(state === 'locked_cond') this.showSysModal("TIME RESTRICTED", req, "fa-clock text-honey");
                else if(state === 'unlocked') {
                    document.getElementById('playTitle').innerText = title;
                    document.getElementById('playVideo').src = img;
                    document.getElementById('playVideoMain').src = img;
                    this.openModal('playModal');
                    this.toast("Initializing Full-Length Stream...");
                }
            },

            resetUploadFlow() {
                document.getElementById('upload-step-1').classList.remove('hidden');
                document.getElementById('upload-step-2').classList.add('hidden');
                document.getElementById('upload-step-3').classList.add('hidden');
                document.getElementById('upTitle').value = '';
            },
            goToPayment() {
                const title = document.getElementById('upTitle').value;
                if(!title) return this.toast("Please enter a Project Title.");
                document.getElementById('upload-step-1').classList.add('hidden');
                document.getElementById('upload-step-2').classList.remove('hidden');
            },
            backToForm() {
                document.getElementById('upload-step-2').classList.add('hidden');
                document.getElementById('upload-step-1').classList.remove('hidden');
            },
            processPayment(method) {
                const amt = method === 'fiat' ? '$500' : '2500 AIF';
                this.toast(`Processing ${amt}...`);
                const title = document.getElementById('upTitle').value || 'UNTITLED';
                const hash = '0x' + Math.random().toString(16).substr(2, 40);
                
                setTimeout(() => {
                    document.getElementById('upload-step-2').classList.add('hidden');
                    document.getElementById('upload-step-3').classList.remove('hidden');
                    document.getElementById('certProjectName').innerText = title.toUpperCase();
                    document.getElementById('certHash').innerText = hash;
                    
                    this.mySubmissions.push({ title: title, status: "ON-CHAIN", hash: hash.substr(0,10)+"..." });
                    this.renderMeTab();
                }, 1500);
            },
            renderMeTab() {
                const c = document.getElementById('my-submissions-list');
                if (this.mySubmissions.length === 0) { c.innerHTML = `<div class="text-center text-xs text-gray-500 font-mono py-6 border border-dashed border-[#333] rounded-lg">No submissions yet.</div>`; return; }
                c.innerHTML = this.mySubmissions.map(s => `
                    <div class="border border-signal/30 bg-[#111] rounded-lg p-4 flex justify-between items-center relative overflow-hidden">
                        <div class="absolute left-0 top-0 w-1 h-full bg-signal"></div>
                        <div>
                            <div class="text-sm font-heavy text-white mb-1">${s.title}</div>
                            <div class="text-[9px] font-mono text-gray-500">Hash: ${s.hash}</div>
                        </div>
                        <div class="bg-signal/20 text-signal border border-signal px-2 py-1 rounded text-[9px] font-bold tracking-widest">${s.status}</div>
                    </div>
                `).join('');
            },

            openInfo(id) {
                const f = FILMS.find(x => x.id === id);
                document.getElementById('infoTitle').innerText = f.title;
                document.getElementById('infoCreator').innerText = f.creator;
                document.getElementById('infoPoster').src = f.video;
                document.getElementById('infoSyn').innerText = f.fullDescription || f.synopsis;
                document.getElementById('infoCast').innerText = f.info.cast;
                document.getElementById('infoDir').innerText = f.info.dir;
                document.getElementById('infoTech').innerText = f.info.tech;
                document.getElementById('infoRegion').innerText = f.info.region;
                
                if(f.info.onChain) {
                    document.getElementById('infoNetwork').innerHTML = `<i class="fa-brands fa-solana text-aif"></i> ${f.info.onChain.network}`;
                    document.getElementById('infoContract').innerText = f.info.onChain.contract;
                    document.getElementById('infoStorage').innerText = f.info.onChain.storage;
                    document.getElementById('infoRoyalty').innerText = f.info.onChain.royalty;
                }
                
                document.getElementById('infoLimits').innerHTML = f.info.limits.map(l => `<li>${l}</li>`).join('');
                this.openModal('infoModal');
            },
            
            openCreator(name) {
                const d = CREATOR_DATA[name];
                if(!d) return;
                document.getElementById('cName').innerText = name;
                document.getElementById('cPop').innerHTML = `<i class="fas fa-fire text-sm"></i> ${d.heat}`;
                document.getElementById('cWorks').innerHTML = `<i class="fas fa-film text-sm"></i> ${d.works}`;
                document.getElementById('cRoi').innerHTML = `<i class="fas fa-chart-line text-sm"></i> ${d.roi}`;
                document.getElementById('cBio').innerText = d.bio;
                document.getElementById('cAvt').src = `https://api.dicebear.com/7.x/identicon/svg?seed=${name}`;
                document.getElementById('cTech').innerHTML = d.tech.map(t => `<span class="bg-[#111] border border-[#333] px-3 py-1.5 rounded-lg text-xs text-gray-300 font-mono">${t}</span>`).join('');
                document.getElementById('cTeam').innerHTML = d.team.map(t => `<div class="flex items-center gap-3 bg-[#111] p-3 rounded-lg border border-[#222]"><div class="w-10 h-10 bg-black rounded-full flex items-center justify-center text-gray-500 border border-[#333]"><i class="fas fa-user"></i></div><div><div class="text-sm font-bold text-white">${t.name}</div><div class="text-[10px] text-gray-500 font-mono">${t.role}</div></div></div>`).join('');
                
                document.getElementById('cPortfolio').innerHTML = d.portfolio.map(p => `
                    <div onclick="app.closeAllModals(); setTimeout(() => app.openInfo(${p.id}), 350)" class="cursor-pointer block bg-[#111] p-4 rounded-lg border border-[#222] hover:border-signal transition-colors flex justify-between items-center group relative overflow-hidden">
                        <div class="absolute top-0 right-0 w-8 h-8 bg-signal/5 rounded-bl-full flex items-center justify-center"><i class="fas fa-play text-[8px] text-signal opacity-0 group-hover:opacity-100 transition-opacity ml-2 mb-2"></i></div>
                        <div class="flex-1 pr-6 relative z-10">
                            <div class="text-sm font-heavy text-white group-hover:text-signal transition-colors">${p.title}</div>
                            <div class="text-[10px] text-gray-400 mt-1 leading-snug">${p.desc}</div>
                        </div>
                        <div class="text-xs font-mono text-gray-600 relative z-10">${p.year}</div>
                    </div>`).join('');
                this.openModal('creatorModal');
            },
            showSysModal(title, desc, iconClass) {
                document.getElementById('sysTitle').innerText = title;
                document.getElementById('sysDesc').innerText = desc;
                document.getElementById('sysIcon').className = `w-16 h-16 rounded-full flex items-center justify-center text-3xl mx-auto mb-4 bg-black border border-[#333] fas ${iconClass}`;
                this.openModal('sysModal');
            },

            renderLangs() {
                const grid = document.getElementById('langGrid');
                grid.innerHTML = LANGS.map(l => `
                    <div class="p-4 rounded-xl border ${l.code === this.lang ? 'border-signal bg-signal/10' : 'border-[#333] bg-[#111]'} cursor-pointer hover:border-signal transition-colors flex justify-between items-center group" onclick="app.setLang('${l.code}')">
                        <div><div class="text-sm font-bold text-white">${l.name}</div><div class="text-[10px] text-gray-500 font-mono mt-1">${l.sub}</div></div>
                        ${l.code === this.lang ? '<i class="fas fa-check-circle text-signal text-lg"></i>' : ''}
                    </div>`).join('');
            },
            setLang(code) {
                this.lang = code;
                document.body.setAttribute('data-lang', code);
                const langDisplay = document.getElementById('currentLangDisplay');
                if (langDisplay) { langDisplay.innerText = code.toUpperCase(); }
                this.renderLangs();
                this.closeModal('langModal');
                this.updateUITexts();
                this.renderFeed(); 
                this.toast(`Language Switched to ${code.toUpperCase()}`);
            },
            updateUITexts() {
                const dict = I18N[this.lang] || I18N['en'];
                document.querySelectorAll('[data-i18n]').forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (dict[key]) el.innerHTML = dict[key];
                });
            },
            
            openModal(id) {
                const el = document.getElementById(id);
                this.currentModal = id;
                el.classList.remove('hidden');
                
                if(id === 'creatorModal' || id === 'infoModal') {
                    const btn = document.getElementById('globalModalClose');
                    btn.classList.remove('hidden');
                    setTimeout(() => btn.classList.remove('opacity-0'), 10);
                }

                setTimeout(() => {
                    if(id==='langModal') { el.classList.remove('opacity-0'); document.getElementById('langContent').classList.remove('translate-y-full'); }
                    else if(id==='sysModal') { el.classList.remove('opacity-0'); document.getElementById('sysContent').classList.remove('scale-95'); }
                    else if(id==='shareModal') { el.classList.remove('opacity-0'); document.getElementById('shareContent').classList.remove('translate-y-full'); }
                    else if(id==='textModal') { el.classList.remove('opacity-0'); document.getElementById('textContent').classList.remove('translate-y-full'); }
                    else if(id==='playModal') { el.classList.remove('opacity-0'); }
                    else el.classList.remove('translate-y-full');
                }, 10);
            },
            closeModal(id) {
                const el = document.getElementById(id);
                this.currentModal = null;
                
                const btn = document.getElementById('globalModalClose');
                btn.classList.add('opacity-0');
                setTimeout(() => btn.classList.add('hidden'), 300);

                if(id==='langModal') { el.classList.add('opacity-0'); document.getElementById('langContent').classList.add('translate-y-full'); }
                else if(id==='sysModal') { el.classList.add('opacity-0'); document.getElementById('sysContent').classList.add('scale-95'); }
                else if(id==='shareModal') { el.classList.add('opacity-0'); document.getElementById('shareContent').classList.add('translate-y-full'); }
                else if(id==='textModal') { el.classList.add('opacity-0'); document.getElementById('textContent').classList.add('translate-y-full'); }
                else if(id==='playModal') { el.classList.add('opacity-0'); }
                else el.classList.add('translate-y-full');
                setTimeout(() => el.classList.add('hidden'), 300);
            },
            closeAllModals() {
                if(this.currentModal) this.closeModal(this.currentModal);
            },
            toast(msg) {
                const t = document.getElementById('toast');
                document.getElementById('toastMsg').innerText = msg;
                t.classList.remove('-translate-y-40');
                setTimeout(()=>t.classList.add('-translate-y-40'), 2500);
            }
        };

        window.onload = () => app.init();
    </script>
</body>
</html>